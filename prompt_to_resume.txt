**SV/UVM Guide – Resume Notes**

**Recent Progress (Session 2025-10-10)**
- Updated `components/ui/InteractiveCode.tsx` to apply theme-aware background, border, and text tokens so the surface no longer uses dark-mode glassmorphism styles when the light theme is active.
- Tightened `tests/e2e/theming.spec.ts` to assert the new light-mode palette and keep the dark-mode baseline intact, preventing regressions as more surfaces are restyled.
- Logged the theming adjustments in `docs/planning/Actionable-Task-Plan.md` and `docs/feedback/Analysis-Report.md` so the visual polish milestone reflects the new work.

**Environment & Testing Notes**
- Commands: `npm run lint`, `npm run test` pass locally.
- Use `npm run test:e2e` (now calls `node scripts/run-e2e-tests.cjs`) for full Playwright coverage; it builds with all feature flags enabled before executing tests.
- Individual flag toggles still work via `NEXT_PUBLIC_FEATURE_FLAG_<FLAG>`; set `FEATURE_FLAGS_FORCE_ON=true` to light up every gated route without adjusting each flag.

- **Playwright currently cannot launch (missing system dependencies such as `libatk1.0-0`); install via `npx playwright install-deps` or the equivalent apt packages before rerunning `npm run test:e2e`.**
- Remaining E2E gaps (once browsers are available): curriculum link sweeps, hero animation assertions, and the navigation/knowledge-hub suites still need locator clean-up and waits similar to the exercise fixes.
- Need to re-run bundle analysis (e.g., `ANALYZE=true npm run build`) to quantify the delta from the D3 modularization and check for any regressions.
- Milestone [P3] (standardize charting) and E2E stabilisation (Milestone 4) remain pending once the current regressions are understood.

**Suggested Next Steps**
1. Install the missing Playwright OS dependencies (`npx playwright install-deps` in the container image or equivalent apt packages) so the browser suite can execute again, then rerun `npm run test:e2e` to exercise the refreshed theming assertions.
2. Sweep other Monaco- and visualization-heavy surfaces for the same light/dark token drift and mirror the `InteractiveCode` approach where needed.
3. After the suites are green, capture a fresh `playwright-report` artifact and update the Milestone 4 status.
4. Run a bundle analysis pass to capture post-modularization metrics (look for D3-heavy routes shrinking) and document the findings in the performance plan.
5. Pick up Milestone [P3] (charting consolidation) once the test suite stabilizes, then plan Milestone 4 tasks (locator tightening, flaky strict-mode fixes) or proceed to the remaining performance work.

**Reminders**
- Keep feature work paused until Milestones 1–4 are complete.
- Document any future gating changes in `docs/feedback/Learning-First-Audit.md` so the audit stays the source of truth.
- Before pushing, run: `npm run lint`, `npm run test`, `npm run build`, and `npm run test:e2e` with the new script.
