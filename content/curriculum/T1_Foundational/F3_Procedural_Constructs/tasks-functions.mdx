import { InfoPage } from "@/components/templates/InfoPage";
import { Quiz } from "@/components/ui";

export const metadata = {
  title: "Tasks and Functions: Scoping and Lifetimes | SystemVerilog Language Foundations",
  description: "Compare callable blocks with and without timing to structure reusable code.",
};

<InfoPage
  title="Tasks and Functions: Scoping and Lifetimes"
  sv_concept_tags={["tasks", "functions", "scoping", "lifetimes"]}
>
  ## Elevator Pitch

  Tasks and functions are reusable blocks of code: functions return a value and execute instantly; tasks can consume time and handle more complex behavior. Think of them as recipesâ€”functions are quick snacks, while tasks are multi-step meals.

  ## Practical Explanation

  ```systemverilog
  function int add(input int a, b);
    return a + b;        // no timing allowed
  endfunction

  task automatic delay_and_print(input int val);
    #5 $display("val=%0d", val); // tasks may include delays
  endtask

  initial begin
    int result = add(2,3);
    delay_and_print(result);
  end
  ```

  *Functions* must finish without timing controls and return a single value. *Tasks* may contain delays and spawn parallel processes. Declaring them `automatic` ensures each call has its own storage, avoiding race conditions.

  For organized code, place common tasks/functions inside <Link href="/curriculum/T1_Foundational/F4_RTL_and_Testbench_Constructs/packages">packages</Link> so multiple modules can share them.

  ## Advanced Notes

  * `automatic` vs `static` controls re-entrancy and variable lifetime.
  * Use `void'(function_call())` to ignore return values.
  * Tasks can be declared `forkjoin` style to wait for parallel operations to complete.

  <Quiz questions={[
    {
      question: "Which construct can include `#5` delays?",
      answers: [
        { text: "function", correct: false },
        { text: "task", correct: true },
        { text: "enum", correct: false },
        { text: "module", correct: false }
      ],
      explanation: "Tasks may consume simulation time, while functions must execute without delays."
    }
  ]} />

</InfoPage>