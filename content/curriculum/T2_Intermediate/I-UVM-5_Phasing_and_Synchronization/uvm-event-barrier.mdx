import { InfoPage } from "@/components/templates/InfoPage";
import { Quiz, InteractiveCode } from "@/components/ui";

export const metadata = {
  title: "uvm_event and uvm_barrier | The UVM Universe - Core Concepts",
  description: "Coordinate activity using lightweight events and blocking barriers for synchronization.",
};

<InfoPage
  title="uvm_event and uvm_barrier"
  uvm_concept_tags={["uvm_event", "uvm_barrier"]}
>

  ## uvm_event

  `uvm_event` provides a simple trigger/wait synchronization. One process calls
  `trigger()` and another waits with `wait_trigger()`.

  <InteractiveCode
    language="systemverilog"
    fileName="uvm_event_example.sv"
    code={`uvm_event ev = new("ev");

initial begin
  fork
    begin
      #20ns;
      ev.trigger();
    end
    begin
      ev.wait_trigger();
      `uvm_info("EV", "Event observed", UVM_LOW)
    end
  join_none
end`}
  />

  ## uvm_barrier

  A `uvm_barrier` blocks progress until a specified number of processes reach it.
  The barrier then "opens" and all waiting processes continue.

  <InteractiveCode
    language="systemverilog"
    fileName="uvm_barrier_example.sv"
    code={`uvm_barrier b = new("b", 2);

task run_phase(uvm_phase phase);
  fork
    begin
      // First participant
      #10ns;
      b.wait_for();
    end
    begin
      // Second participant
      #15ns;
      b.wait_for();
    end
  join
  `uvm_info("BARRIER", "Both processes passed the barrier", UVM_LOW)
endtask`}
  />

  <Quiz
    questions={[
      {
        question: "Which method blocks until a uvm_event is triggered?",
        answers: [
          { text: "wait_trigger()", correct: true },
          { text: "trigger()", correct: false },
          { text: "reset()", correct: false },
          { text: "jump()", correct: false }
        ],
        explanation:
          "`wait_trigger()` suspends the calling process until `trigger()` is executed."
      },
      {
        question:
          "A uvm_barrier constructed with a count of 3 will release execution after...",
        answers: [
          { text: "Any process calls wait_for()", correct: false },
          { text: "Three processes call wait_for()", correct: true },
          { text: "Barrier.reset() is called", correct: false },
          { text: "The simulation ends", correct: false }
        ],
        explanation: "The barrier opens once the specified number of processes arrive."
      }
    ]}
  />

</InfoPage>