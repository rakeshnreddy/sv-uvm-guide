import { InfoPage } from "@/components/templates/InfoPage";
import { Quiz } from "@/components/ui";
import { CodeBlock } from "@/components/ui/CodeBlock";

export const metadata = {
  title: "uvm_root and Test Execution | The UVM Universe - Core Concepts",
  description: "The singleton that orchestrates UVM phases and launches tests.",
};

<InfoPage
  title="uvm_root and Test Execution"
  uvm_concept_tags={["uvm_root", "test execution"]}
>

  ## Level 1: The Testbench Conductor

  `uvm_root` is the one-and-only top-level component that coordinates all others.  
  Imagine it as the conductor of an orchestra, ensuring every section plays in sync.  
  Without `uvm_root`, the phases and report settings would have no central authority.

  ## Level 2: Running the Show

  A top-level Verilog module calls `run_test` to start the UVM test.  
  `uvm_root` builds the hierarchy, runs phases, and wraps up the simulation.

  <CodeBlock language="systemverilog" code={`import uvm_pkg::*;\n`include "uvm_macros.svh"\n\nclass my_test extends uvm_test;\n  `uvm_component_utils(my_test)\n  function new(string name, uvm_component parent);\n    super.new(name,parent);\n  endfunction\nendclass\n\nmodule top;\n  initial begin\n    uvm_root::get().set_report_verbosity_level(UVM_LOW); // optional global setting\n    run_test("my_test");\n  end\nendmodule\n`} />

  ## Level 3: Veteran Notes

  - `uvm_root::get().print_topology()` is invaluable for debugging hierarchy issues.  
  - Global timeouts can be set with `uvm_root::get().set_timeout(1ms, 0);`.  
  - Command-line `+UVM_TESTNAME` overrides the test name without editing code.

  ## Check Your Understanding

  <Quiz questions={[
    {
      "question": "Which singleton orchestrates UVM phase execution?",
      "answers": [
        { "text": "`uvm_root`", "correct": true },
        { "text": "`uvm_test`", "correct": false },
        { "text": "`uvm_env`", "correct": false },
        { "text": "`uvm_report_server`", "correct": false }
      ],
      "explanation": "`uvm_root` sits at the top of the component tree and controls phases."
    },
    {
      "question": "Which statement starts a UVM test from a top-level module?",
      "answers": [
        { "text": "`uvm_root::get()`", "correct": false },
        { "text": "`set_report_handler()`", "correct": false },
        { "text": "`run_test(\"my_test\")`", "correct": true },
        { "text": "`uvm_component_utils`", "correct": false }
      ],
      "explanation": "`run_test` tells `uvm_root` which test to build and execute."
    }
  ]} />

</InfoPage>
