import { InfoPage } from "@/components/templates/InfoPage";
import { InteractiveCode, Quiz } from "@/components/ui";


export const metadata = {
  title: "Immediate vs. Concurrent Assertions | Advanced SystemVerilog for Verification",
  description: "Compare procedural checks with temporal properties through hands-on examples.",
};

<InfoPage
  title="Immediate vs. Concurrent Assertions"
  sv_concept_tags={["immediate assertions", "concurrent assertions"]}
>

  ## Elevator Pitch

  Immediate assertions execute like regular procedural statements and check a condition at the exact time they run.

  Assertions catch bugs by checking that design behavior meets expectations. **Immediate** assertions fire instantly within procedural code, while **concurrent** assertions monitor signal relationships over time.

  ## Practical Explanation

  ```systemverilog
  // Immediate assertion: procedural
  always_ff @(posedge clk) begin
    assert (req == 0) else $error("Req high during reset");
  end

  // Concurrent assertion: temporal
  property hold_until_ack;
    req |-> ##[1:3] ack;
  endproperty
  assert property (hold_until_ack);
  ```

  Immediate assertions live in <Link href="/curriculum/T1_Foundational/F3_Procedural_Constructs/flow-control">procedural blocks</Link>. Concurrent assertions sit outside and observe signal sequences, enabling checks like "req must be followed by ack within 3 cycles." See <Link href="/curriculum/T2_Intermediate/I-SV-4_Assertions_SVA/multi-clocking">multi-clocking</Link> for multi-clock properties.

  ## Advanced Notes

  * Concurrent assertions support sampling with `##` delays and repetition operators.
  * Use `disable iff` to mask assertions during reset.
  * Remember: **Immediate = instant; Concurrent = temporal watchdog**.

  <Quiz questions={[
    {
      question: "Where do immediate assertions execute?",
      answers: [
        { text: "Inside procedural code", correct: true },
        { text: "In modules only", correct: false },
        { text: "As stand-alone properties", correct: false },
        { text: "In covergroups", correct: false }
      ],
      explanation: "Immediate assertions are statements inside procedural code and are evaluated when the code executes."
    }
  ]} />

  <InteractiveCode>
  ```systemverilog
  always_ff @(posedge clk) begin
    // Fail if address is misaligned on this cycle
    assert (!(addr[1:0])) else
      $error("Address %h is not word aligned", addr);
  end
  ```
  </InteractiveCode>

  Concurrent assertions monitor temporal behavior across clock cycles using sequences and properties.

  <InteractiveCode>
  ```systemverilog
  sequence s_req_then_ack;
    req ##1 ack;
  endsequence

  property p_req_ack;
    @(posedge clk) req |-> s_req_then_ack;
  endproperty

  assert_req_ack: assert property (p_req_ack)
    else $error("Ack did not follow req");
  ```
  </InteractiveCode>

  ### Advanced Tips

  - Use immediate assertions for quick sanity checks inside procedural code.
  - Concurrent assertions can be reused across modules by placing them in interfaces or packages.

  ## Check Your Understanding

  <Quiz questions={[
    {
      question: "Where do immediate assertions execute?",
      answers: [
        { text: "Only in interfaces", correct: false },
        { text: "Inside procedural code such as always blocks", correct: true },
        { text: "In a separate assertion block", correct: false },
        { text: "Only during reset", correct: false }
      ],
      explanation: "Immediate assertions behave like procedural statements."
    },
    {
      question: "What enables concurrent assertions to monitor behavior over time?",
      answers: [
        { text: "They are scheduled by an always block", correct: false },
        { text: "They are evaluated on clock edges using properties and sequences", correct: true },
        { text: "They execute only once", correct: false },
        { text: "They cannot include delay operators", correct: false }
      ],
      explanation: "Concurrent assertions use sequences and properties evaluated on clock edges."
    }
  ]} />

</InfoPage>
